# 🔥지옥에서 온 관리자 Git🔥

> **여러 명의 개발자가 협력하여 프로젝트를 관리할 수 있도록 돕는 도구**

<br>

## 2️⃣-2️⃣ 소규모 협업하기 시나리오 2편

---

[TOC]

---

## 1) 팀원 역할 :  blog-team내려받기

![image-20240803160458529](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240803160458529.png)

![image-20240804004744144](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804004744144.png)

![image-20240804004755838](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804004755838.png)

![image-20240803160651723](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240803160651723.png)

![image-20240803160708085](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240803160708085.png)

> 팀원은 팀원 폴더에서 blog-team을 Git clone으로 내려받아 blog-team폴더를 열어서 작업환경을 만들어 줍니다.

<br>

## 2) 팀원 역할 : topic 만들고 PR하기!

- #### 브랜치 컨벤션을 기억하시나요?

![image-20240804010519998](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804010519998.png)

> 협업시 중요한 컨벤션에서 브랜치에 대한 얘기를 잠깐 했었는데요. dev에서 특정기능들을 만들어서 push하는게 아닌 topic  브랜치를 만들어 기능을 개발을 한 뒤 dev 브렌치에 PR요청(merge승인 요청())을 합니다. 그럼 팀장은 PR 요청을 받아 dev에 합쳐도 될지 판단을 한뒤에 merge를 승인하고 완료하게 됩니다. 

<br>

- #### 그런데 만약 팀장이 팀원의 커밋 로그를 보고 깔끔하게 정리를 해오라고 합니다. 어떻게 하면 될까요?

![image-20240804012249671](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804012249671.png)

> 먼저 팀원은 팀장에게 요구사항을 확인하고 어떤 커밋을 깔끔하게 할지 확인을 합니다. 그리고 난 후 rebase를 진행하여 원격브랜치에 강제푸쉬를 합니다. 그리고 다시 dev에 PR 요청을 보내서 머지를 완료하게 됩니다.
>
> <u>강제푸쉬</u>  #git push -f origin <브랜치 명> 

<br>

## 3) 팀원 역할 :  회원가입 만들기

**![image-20240804012916940](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804012916940.png)**

> 먼저 기능을 개발하기 위한 브랜치를 만들어 줍니다. join-topic

![image-20240804013448462](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804013448462.png)

> 회원가입.txt 생성
> 1. 회원가입 뷰 완료
> 2. 회원가입 컨트롤러 완료
> 3. 회원가입 완료
>
> 내용 적용
> git add .
> git commit -m"feat(join) : 회원가입 완료"
>
> 실제 개발을 했다고 하면 기능이 잘 되는지 실행을 해보고 잘 된다면 이제 푸쉬해서 깃헙을 확인하고 dev에 PR 요청을 해보겠습니다.

<br>

- #### 깃헙에서 브랜치 확인하기

![image-20240804014635499](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804014635499.png)

> 깃헙의 blog-team에서 확인해보면 새로운 브랜치가 만들어질 것을 확인할 수 있습니다. 또한, 팀원의 계정으로 회원가입 파일과 커밋내용이 추가된 걸 확인할 수 있습니다.
>
> 

- #### 이제 PR요청으로 dev에 merge를 요청해보겠습니다.

![image-20240804014936965](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804014936965.png)

> 위에 노란색 박스로 새로운 브랜치에서 푸쉬가 있다고 PR 요청을 하라고 알려주는데요. 동일한 브랜치일 경우 알려주지 않는 경우가 있으니 직접  PR요청을 생성해보겠습니다.

![image-20240804015048312](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804015048312.png)

> 역시나 친절하게 알려주고 있습니다. 하지만 new pull request로 시작해보겠습니다.

![image-20240804015414046](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804015414046.png)

![image-20240804015418590](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804015418590.png)

![image-20240804015452612](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804015452612.png)

> 위와 동일하게 dev <- join-topic으로 머지를 하겠다고 브랜치를 설정해줍니다. 그리고 커밋의 내용과 어떤 부분이 추가 되었는지 확인할 수 있습니다.

![image-20240804015734125](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804015734125.png)

> 팀장님 회원가입 완료했습니다. 코드 확인 부탁드립니다.
>
> 1. 회원가입 뷰 완료
> 2. 회원가입 컨트롤러 완료
> 3. 회원가입 완료
>
>  draft는 중간에 팀장에게 진행사항을 한번 봐달라는 요청으로 중간보고와 같습니다. 
>
> Create pull request를 합니다.

![image-20240804020251536](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804020251536.png)

> 이렇게 팀장은 처음에 팀원이 PR 요청을 하면 merge를 할 수 없게 블락이 되게 설정을 했었습니다. 그럼 이제 팀장은 팀원에게 요청을 확인하고 승인을 할 수 있습니다.

<br>

## 4) 팀장 역할 : PR 요청 확인

![image-20240804020652767](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804020652767.png)

![image-20240804020725007](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804020725007.png)

![image-20240804022413685](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804022413685.png)

> 팀장은 이제 PR요청을 확인하고 커밋과 코드를 확인한 뒤  Approve로 선택하여 메세지를 남기고 submit review를 해줍니다.

![image-20240804022640580](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804022640580.png)

- #### 팀장이 머지까지 완료!

![image-20240804023227001](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804023227001.png)

---



![image-20240804023249394](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804023249394.png)

> 팀장과 팀원은 각각 머지가 승인이 가능한 상태를 확인할 수 있습니다. 이때 팀장은 일일이 팀원의 머지를 해줄 필요는 없습니다. 팀원이 많으면 많을수록 한명씩 알려주기도 힘들기 때문이죠. 알람설정을 했다면 팀원은 승인알람을 받고 자신이 머지를 하는게 가장 편할수도 있습니다.

<br>

- #### 기능이 완료가 된 브렌치는 남겨둘 필요가 있을까요?

![image-20240804023532847](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804023532847.png)

> 이제  dev에 회원가입.txt 파일이 들어와 있는걸 확인할 수 있습니다. 계속 topic을 만들게 되면 브렌치가 쌓여 관리가 힘들 수 있으니 topic 브랜치를 삭제하도록 하겠습니다. 

![image-20240804023757178](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804023757178.png)

![image-20240804023823872](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804023823872.png)

> [!tip]
>
> <u>원격저장소 브렌치 삭제</u>  #git push --detele origin <브랜치 명>

<br>

## 5) 팀장&팀원 역할  :  dev동기화

> 위 와 같은 모든 과정은 팀장과 팀원이 의견을 나눈 후 내부적으로 문서를 만들어서 정해놓는게 좋습니다.
>
> 1. topic 브랜치 생성
> 2. 개발 완료
> 3. 커밋 로그 rebase로 정리
> 4. topic 푸시
> 5. pr 요청
> 6. 팀장 승인
> 7. merge 완료 후 해당 branch 삭제
> 8. (중요) dev 브랜치 pull 해서 동기화 하기!

- #### dev를 동기화 하지 않는다면 어떻게 될까요?

![image-20240804024543106](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804024543106.png)

> 팀원은 dev에 join-topic을 merge 하였지만 자신의 로컬에서는 최신화가 되어있지 않기 때문에 이대로 개발을 하게 되면 최신화가 되지 않는 상태로 topic이 만들어질 겁니다.  그러니 dev가 최신화가 되었다면 반드기 팀장과 팀원들은 업데이트를 하길 바랍니다.

![image-20240804024745276](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804024745276.png)

> [!tip]
>
> <u>동기화</u> #git pull origin <브랜치 명>

<br>

## 6) 팀장 역할 : 웹에서 merge 충돌해결하기

- #### 만약 팀원들이 dev를 동기화 시키지 않는 상태에서 계속 기능을 만들고 푸쉬를 한다면 어떻게 될까요?

> [!note]
>
> 1. 팀장(kjh5848)은 회원가입에 아이디 중복체크를 추가해서 회원가입을 merge한다.
> 2. 팀원은(kjh5844)은 회원가입에 비밀번호 체크를 만들어서 merge한다.
>
> 위 상황을 보게 되면 팀장이 업데이트를 하고 난 후 팀원은 dev를 최신화 시키지 않고 다른 기능을 PR 요청하게 됩니다. 그러면 웹에서 충돌이 일어나 팀장 또는 팀원이 깃헙에서 충돌을 잡아야 하는데요. 이 부분을 확인해보겠습니다.

![image-20240804051457371](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804051457371.png)

> 팀장은 팀원이 merge하자마자 바로 동기화를 하였습니다. 이제 회원가입에 아이디 중복체크를 추가하여 다시 수정 해보도록 하겠습니다.

![image-20240804055346416](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804055346416.png)

![image-20240804052134227](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804052134227.png)

> 이렇게 아이디 중복체크를 완료 하였습니다.

- #### 이제 팀원이 패스워드 체크기능을 추가 해서 다시 PR요청을 합니다.

![image-20240804055754744](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804055754744.png)

![image-20240804055813741](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804055813741.png)

> 그럼 웹에서 Resolve conflicts(충돌 해결)버튼이 나오게 되는데요. 

![image-20240804055957051](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804055957051.png)

![image-20240804060113849](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804060113849.png)

![image-20240804060206491](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804060206491.png)

> 이 부분이 기존에 있던 형상이 달라서 충돌이 나는 걸 확인할 수 있습니다. 충돌부분을 수정해주고 Mark as resolve버튼을 눌러주면 충돌이 나는 파일마다 알려주고 해결되면 초록색으로 표시를 해줍니다.

![image-20240804060303021](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804060303021.png)

> 팀장이 PR 요청을 확인할때 잘 해결되서 보이는걸 확인할 수 있습니다.

<br>

## 7) 팀원 역할 : 로컬에서 충돌잡기

- #### 웹에서 충돌을 잡게 되면 굉장히 불편한 부분이 많습니다. 때문에 로컬에서 충돌을 해결하고 merge하는게 더 편할 수도 있는데요. 알아보겠습니다.

> 1. push를 하기 전에 dev에서 동기화를 한 후 개발했던 브렌치에 merge를 한다.
> 2. 충돌이 나면 해결한다.
> 3. commit을 남긴다.
> 4. push 한다.

![image-20240804061003802](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804061003802.png)

> dev로 checkout!! -> git pull origin dev로 동기화를 해줍니다.

![image-20240804061217601](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804061217601.png)

> checkout pass_check-topic으로 다시 이동하고 git merge dev로 병합해줍니다. 그러면 위 처럼 충돌이 나는걸 확인할 수 있습니다.

![image-20240804062341454](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804062341454.png)

![image-20240804062131062](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804062131062.png)

![image-20240804062301691](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804062301691.png)

![image-20240804062428958](https://raw.githubusercontent.com/kjh5848/typora-image/main/image/image-20240804062428958.png)

> 충돌을 해결하고 나면 꼭 add -> commit을 해줘야 MERGING상태에서 빠져나옵니다. 그리고 다시  하고 PR요청을 하면 dev에  merge가 잘 된 걸 확인할 수 있습니다.
